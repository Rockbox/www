**** BEGIN LOGGING AT Sun May 19 13:32:37 2002

-->	adi|home (~adiamas@as5300-9.216-194-23-128.nyc.ny.metconnect.net) has joined #rockbox
---	Topic for #rockbox is Does your box rock? http://bjorn.haxx.se/rockbox/
---	Topic for #rockbox set by Bagder at Mon May 13 04:46:28
-->	pippoblu (pippoblu@TVT-CaTV-dhcp-45-101.urbanet.ch) has joined #rockbox
<--	pippoblu (pippoblu@TVT-CaTV-dhcp-45-101.urbanet.ch) has left #rockbox
-->	[TDM]Mr_B|away (~nx_2000@ip68-0-62-70.no.no.cox.net) has joined #rockbox
---	[TDM]Mr_B|away is now known as [TDM]Mr_B
<--	[TDM]Mr_B has quit ()
-->	wavey (~wavey@dlan1431.dircon.co.uk) has joined #rockbox
<--	wavey (~wavey@dlan1431.dircon.co.uk) has left #rockbox
-->	elinenbe (elinenbe@adder.engin.umich.edu) has joined #rockbox
---	Tumm is now known as tumm
<elinenbe>	hello there
-->	martin__ (~martin@pD9E7A37E.dip.t-dialin.net) has joined #rockbox
<--	martin__ (~martin@pD9E7A37E.dip.t-dialin.net) has left #rockbox ("Client Exiting")
<--	elinenbe has quit ("Leaving")
---	tumm is now known as Tumm
-->	Zagor (~bjst@as9-5-6.k.s.bonet.se) has joined #rockbox
-->	fall3 (~francis@nas-cbv-9-62-147-161-190.dial.proxad.net) has joined #rockbox
<Zagor>	hi fall3
<fall3>	hi
<--	fall3 (~francis@nas-cbv-9-62-147-161-190.dial.proxad.net) has left #rockbox ("Fermeture du client")
<adi|work>	ack!!! ppl...
<adi|work>	make them leave!!!!
<Zagor>	haha
<adi|work>	did the changes i made to the rockbox make sense?
<adi|work>	btw
<adi|work>	oh.. and none of them were reflected on the windows side...
<Zagor>	the credit stuff?
<Zagor>	or do you mean the archos dir?
<Zagor>	my !"#$%&/(/&%$# display seems broken :-(
<Zagor>	nothing i do works
<--	Zagor has quit ("bye")
*	adi|home nods knowingly
-->	motiv01 (~trillian@sdn-ar-001ncraleP018.dialsprint.net) has joined #rockbox
<--	motiv01 (~trillian@sdn-ar-001ncraleP018.dialsprint.net) has left #rockbox
---	dw|gone is now known as dwihno
-->	Bagder (~daniel@as3-3-2.ras.s.bonet.se) has joined #rockbox
<dwihno>	HELLÖ! :D
*	dwihno vinkar
-->	calpefrosch|work (~calpefros@62.52.174.30) has joined #rockbox
<Bagder>	morning
<calpefrosch|work>	morning
<dwihno>	Höj höj
<dwihno>	I sold one of my computers last night
<dwihno>	So now I got to spend my money on archos stuff ,D
<Bagder>	cool
<dwihno>	yup
*	Bagder drowns in his email flow
*	dwihno sends some more mail to Bagder 
<dwihno>	10: print "hello"
<dwihno>	20: goto 10
<adi|home>	ack!!!
<--	calpefrosch|work has quit (Read error: 104 (Connection reset by peer))
<adi|home>	ppl here...
<adi|home>	no.. ppl arent allowed here...
<Bagder>	hey adiamas
<adi|home>	its been _my_ room for like 3 days...
<adi|home>	GO AWAY!!!!!
<Bagder>	hehe
<adi|home>	this is _my_ room!!!!
<adi|home>	heheh
*	Bagder boos
<adi|home>	have you seen the credits list on the uisim?
<Bagder>	I saw the code on the cvs list, that's all yet
<adi|home>	would work fine if i wern' for you sweds and your funny looking letters
<Bagder>	ah right
<Bagder>	Björn should change his name ;-)
<adi|home>	damn right...
<adi|home>	don't see me interjecting cyrillic letters in my name do ya?
<Bagder>	not yet ;-)
<adi|home>	as an exampel :)
<adi|home>	that and i fixed the splash sceen a bit
<adi|home>	you know.. really "useful" stuff..
-->	Zagor_ (~bjst@labb.contactor.se) has joined #rockbox
---	Zagor_ is now known as Zagor
<dwihno>	Dr. Zagmaster!
<Zagor>	woo there
<Bagder>	we should make the credits scroll
<Bagder>	hey Zagor
<dwihno>	The splash screen should be configurable - think about ppl wanting a quick startup
<adi|home>	nah.. ppl deal with the spash screen now..
<adi|home>	while the firmware is "loading"
<dwihno>	spending precious CPU cycles with scrollers?!
<dwihno>	:-D
<adi|home>	and im sorry.. if you in a such a rush you can't wait 200 milliseconds..
<dwihno>	Do you realize the insanity!? :)
<Bagder>	yes!
<dwihno>	200 msec's is 195 too many!
<adi|home>	hehehe
<adi|home>	and fortanetly... 100 milliseconds faster then most of us think ;)
<dwihno>	http://www.hackles.org/cgi-bin/archives.pl?request=166
<Bagder>	Zagor: did you run the app on target ?
<Zagor>	i tried, but I think my screen is broken :-(
<dwihno>	:-(
<Bagder>	asch
*	dwihno sends Zagor some karlssons klister
<dwihno>	You can fix just about everything with that goo!
<Zagor>	it works fine, the debug output tells me :-)
<Bagder>	hehe
<dwihno>	See, the glue fixed it!
<dwihno>	Never underestimate the power of the Karlsson side!
<Bagder>	Zagor: so we basicly need to add Linus' mpeg thread to have a v1?
<Zagor>	yup
<Bagder>	kewlness
<adi|home>	can the uisim play music yet?
<Bagder>	on linux, it should be able to
<Bagder>	I haven't tried
<adi|home>	cause i was just thinking.. it might be perversly cool to realase the uisim evenutally as another mp3 player front end :)
<Zagor>	haha
<Bagder>	hahaha
*	adi|home wonders if that was good or bad laughter
<Bagder>	perverse it is
<adi|home>	hell... least ppl could play tetris while listening ;)
<Bagder>	very very tiny tetris
<adi|home>	well.. we offer it to 3 years olds...
<adi|home>	their very very tiny ppl
<adi|home>	did we ever find out if there is a specific reason you can't use the remote control witht he recorders?
<Zagor>	you can
<Zagor>	i do
<Zagor>	i guess the earliest firmware versions simply didn't listen to the serial port. current versions do.
<adi|home>	cool
<dwihno>	remote control(?)
<Zagor>	there's a wire remote you plug into the headphone jack. it's an extra accessory
<dwihno>	cool
<dwihno>	does it come with the basic set or do you have to order some extra widgets?
<dwihno>	eww
<dwihno>	<-- smells like a dog all over the hands
<Zagor>	extra
<dwihno>	stupid dog, running around licking my hand
<Zagor>	it comes with the "travel kit", for some reason
<adi|home>	well.. first tme i saw this
<adi|home>	ver 1.21d "Implemented improved SCMS* (Serial Copyright Management System), Fixed bugs within
<adi|home>	                                               SCMS, which caused errors when encoding from digital source."
<dwihno>	Should I get the travel kit?
<Zagor>	nah
<Zagor>	i never use the remote except for testing
<adi|home>	no you should get the travel kit instead
<Zagor>	adi|home: the SCMS can be disabled
<adi|home>	in software or what?
<adi|home>	and will we be implimenting it?
*	adi|home prepares to slap zagor
<dwihno>	"Serial Copyright Management System"? Sounds fishy
<Zagor>	adi|home: SCMS is software only, as far as I understand
<Zagor>	so we just won't have it
*	adi|home cheers wildly
<dwihno>	Why does the recorder store the streams in VBR btw?
<adi|home>	someday.. when i can afford to buy congressmen too.. im going to repeal the DMCA
<dwihno>	I guess you gurus might have the answer to that question ;D
<Zagor>	dwihno: the encoder chip only supports VBR
<dwihno>	Zagor: ah, okay...
<Zagor>	actually, VBR is in some ways a simpler MP3 than CBR. due to avoiding the use of "bit resevoirs"
<dwihno>	Simple answer to simple questions :)
<adi|home>	so.. seeing as i have more time this week...
-->	Linus (~linus@labb.contactor.se) has joined #rockbox
<adi|home>	how close to the jbr do we want the interface to be?
<dwihno>	wb Linus
<Linus>	yo!
<adi|home>	and if you could have me work on any higher level stuff.. what would it be?
<Zagor>	adi|home: we'll make two separate interfaces, so make it as close as you like
<Bagder>	adiamas: we could use some code for dealing with playlists
<Bagder>	I mean, edit, add, delete etc
<adi|home>	nod
<adi|home>	have we implimented unlink() yet?
<Zagor>	we have no write support enabled at the moment
<adi|home>	as for the 999 playlist limit on the players... do we know if there is a specific reason for i?
<Zagor>	we can't think of any :)
<adi|home>	thats fine.. i can prob code around it..
<adi|home>	ghost funcitons etc
<Zagor>	why do you need unlink() ?
<adi|home>	delete?
<PsycoXul>	so if someone were to build current CVS firmware and apps for -DARCHOS_PLAYER=1 on both, and threw it on their player, should they expect it to do more than turn the red LED on? heh
<adi|home>	how else do you delete a file from inside the player?
<adi|home>	yes.. it should wipe your player and send me your credit card numbers :)
<Zagor>	ok, no there's no other way.
<Bagder>	PsycoXul: well, zagor believed it worked ;-)
<Zagor>	I want to wait with introducing disk writes for some time. It's a major risk.
<Zagor>	PsycoXul: did you try it?
<PsycoXul>	well thats what i got
<PsycoXul>	heh
<PsycoXul>	it didn't even get rid of the ROM firmware's splash screen
<Zagor>	!?
<adi|home>	zagor.. you see any prob with getting an unlink() working?
<adi|home>	we could test that safely
<Zagor>	adi|home: no problems really, but we need to test it exhaustively before letting it out in public
<adi|home>	thats a given...
<adi|home>	do we want editing/deleting to be a feature in v1?
<Zagor>	no
<adi|home>	okay.. then it goes on the back burner.. i can code around it for now...
<adi|home>	ill just display text saying "your file would normally be <insert action>"
<adi|home>	:)
<Zagor>	hehe
<Zagor>	PsycoXul: that's interesting. i thought it was just my frankenstein's archos that didin't work. i'll try on linus' archos next.
<PsycoXul>	ok
<adi|home>	i have a small recommendation...
<adi|home>	the lcd code...
<adi|home>	wouldnt it make sense to have a Recorder version and a player version?
<adi|home>	with 90% of the player version just empty functions?
<adi|home>	this way we don't need all the #ifdefs all over the place?
<adi|home>	and just localize the #ifdefs to inside the lcd.[ch]?
<Bagder>	lots of the lcd #ifdefs is due to how the player simulator is working
<adi|home>	?
<Bagder>	becuase it uses the recorder simulator's LCD functions
<adi|home>	right... and?
<Zagor>	I think adi is talking about #ifdefs in the application code, such as tree.c
<adi|home>	yeah
<Bagder>	ah, ok, I'll shut up ;-)
<adi|home>	#ifdef HAVE_LCD_BITMAP
<adi|home>	                    lcd_update();
<adi|home>	#endif
<adi|home>	in the app code all over is just hideous
<adi|home>	so if we did lcd_update
<adi|home>	lcd_update(){}
<adi|home>	for player
<Zagor>	it's a good point. should we have the same API for both?
<adi|home>	and the real function for recorder
<Zagor>	actually, I added a dummy player lcd_update() yesterday... :)
<adi|home>	if not the same.. then very similar
*	adi|home saw that.. 
<adi|home>	its what gave me the idea...
<adi|home>	i could test out the theory and see how it works/looks before i toss it up..
<adi|home>	pass it off to you guys to play with ..
<Zagor>	so the question is: should we have a dummy lcd_setfont() lcd_setmargins() etc for the player too?
<adi|home>	yeah..
<adi|home>	but i woulnd't even say "dummy"
<adi|home>	i would do this...
<adi|home>	void lcd_update() {
<adi|home>	#ifdef.....
<adi|home>	#else
<adi|home>	#endif
<adi|home>	}
<adi|home>	keep it localized
<adi|home>	wherever possible
<adi|home>	the functions that have to differ, well those take diff. args.
<adi|home>	let the compiler optimize all the crap out
<Zagor>	actually, I was thinking of doing the player stubs as empty macros so they're not even called
<adi|home>	i assumed that if a function was empty, and called, then the compiler would just optimize it out anyway
<Zagor>	yeah, i guess
<Bagder>	no
<Bagder>	they're in different files
<Zagor>	ah, right. so it can't know
<adi|home>	ahh.. so it still has to link it in?
<Bagder>	yes
<adi|home>	so Zag.. what did you mean about the macros.. what were you thinking?
<Zagor>	#ifdef PLAYER
<Zagor>	#define lcd_update()
<Zagor>	#else
<Zagor>	void  lcd_update(void)
<Zagor>	{
<Zagor>	dodum();
<Zagor>	}
<Zagor>	#endif
<Zagor>	or, uh no. i mean the header file not the implementation
<Zagor>	do I make sense?
<adi|home>	so in the header youd have like
<adi|home>	#ifdef PLAYER
<adi|home>	#define lcd_update()
<adi|home>	#else
<adi|home>	void lcd_update(void);
<adi|home>	#endif
<adi|home>	?
<dwihno>	Just a quick question... Should I order something extra than the 'basic' recorder package?
<Zagor>	yes, that was my thought
<adi|home>	nah
<adi|home>	you can get what you need off ebay
<Bagder>	dwihno: no, I don't think so
<dwihno>	ah, okay
<Zagor>	dwihno: better headphones
<dwihno>	Then I'll place my order
<adi|home>	hmmm.. well.. only down side .. what about functions taht take arguements?
<dwihno>	Zagor: Already got that ;D
<adi|home>	yeah. i hate the ones that come with the recorder
<Zagor>	adi|home: #define lcd_setfont(__font__)
<adi|home>	?
<adi|home>	wtf does __font__ become?
<Bagder>	it eats the argument
<Zagor>	it's just a declaration that eats the argument
<adi|home>	ah.. so just like #define lcd_setfont(x)
<Bagder>	it is for #define moo(x) poo(x)
<adi|home>	nods
<Zagor>	yes
<adi|home>	hehe was the __ that through me...
<adi|home>	thought i was missing something :)
<Zagor>	ah, well you can skip those
<adi|home>	well.. might i sugest then #define lcd_setfont(IgnoreMe) or something?
<adi|home>	or whatever
<adi|home>	hmm.. let me go play for a min
<Zagor>	sure
*	dwihno gets the bucket and shovel and follows adi to the playground
<Zagor>	bagder, linus: what's your opinion about this kind of shadow functions? I'm still not sure what I think.
<adi|home>	personally.. i think as long as we state we're doing it.. (in the docs) its a good idea
<Zagor>	it could get confusing and bug ridden, since bad code will still "work" on one of the two
<Bagder>	I think they're fine, as it makes modules that are shared for both LCDs more readable
<Linus>	I didn't follow
<adi|home>	want i should explain linus?
<Linus>	Is it about accepting a setfont() call on the Player?
<Zagor>	yes
<adi|home>	sorta
<Linus>	Then I think it's dirty, but acceptable
<adi|home>	we are still early enough on the road that if we don't like it.. we can always switch back
<Zagor>	right
<dwihno>	It's a more cosmetically nice way than 102401 #ifdef's
<Linus>	indeed
<adi|home>	nods
<adi|home>	and once the api is set in stone. life gets easier for others that want to work on the project
<adi|home>	"oh just use the api, it takes care of itself" is easier and nicer to say then "remember to #ifdef around everything"
<Bagder>	right, but people will still do mistakes
<Bagder>	since the player won't require lcd_update() but the recorder does
<Linus>	Well, I don't like to say "set in stone" but I see what you mean.
<adi|home>	thats true...
<dwihno>	As long as we are not assimilated by borg, we just have to deal with those problems as those arise.
<adi|home>	what we could do is have all the #defines call one common funciton that prints it was called on debug
<adi|home>	shrugs
<Zagor>	the application code works on linus' archos, but not mine :-(
<dwihno>	Zagor: Hmm, fishy! Has he some HW mods that yours don't have?
<Zagor>	well my archos is a monster. it's a new cpu and an old lcd.
<Zagor>	PsycoXul: did you make sure the Makefile for both apps and firmware specified the right player version?
<dwihno>	Zagor: Have you raped your archos?
<Zagor>	oh yes :)
<dwihno>	You mad sadist!
<Zagor>	we wouldn't be at this point without ripping them apart and poking around
<dwihno>	Next time, get some photos while you're at it ;)
<Zagor>	you mean http://bjorn.haxx.se/rockbox/internals/ isn't good enough?
<adi|home>	would it be "#defin lcd_update();" or #define lcd_update()  ?
<adi|home>	semi-colon or not
<Zagor>	not
<dwihno>	Zagor: I want to see some pics of the user interface! :D
<dwihno>	<-- is a bit perverted, I know
<Zagor>	dwihno: there is no user interface to take pictures of yet. try the simulator
<adi|home>	yup...
<adi|home>	i have a really nice screen shot of my tic-tac-toe before my code disappeared :)
<PsycoXul>	Zagor: yes, i've got a studio 20 and i made sure they were both set to TARGET = -DARCHOS_PLAYER=1
<Zagor>	hehe
<dwihno>	Zagor: Does it compile with mingw/32? :)
<Bagder>	dwihno: make it if not
<dwihno>	Yeah
<dwihno>	Sounds like a heap'o'fun
<dwihno>	Where do I start?
<Bagder>	get the code from CVS
<Zagor>	http://bjorn.haxx.se/rockbox/cvs.html
<Bagder>	get the firmware, apps and uisimulator directories
<adi|home>	to compile the player version of the ui, not the recorder... whats the make commandline?
<Zagor>	'make' :-)
<Zagor>	adjust the Makefile
<adi|home>	oh damn you...
<adi|home>	bloody hell :)
<dwihno>	*checking out*
<adi|home>	cool...
<adi|home>	but ya don't need to tell us ;)
<dwihno>	of course
<adi|home>	hehehe
<dwihno>	I don't have anything better to atm
<dwihno>	So I'll just pester you, great huh :) ?
<adi|home>	sounds wonderful :)
<adi|home>	okay.. bedtime
<adi|home>	niht all..
<Bagder>	night adi
<dwihno>	nighty
-->	wavey (~wavey@dlan1431.dircon.co.uk) has joined #rockbox
<Bagder>	hey wavey
<Zagor>	hi wav
<dwihno>	Is it possible to revert to older versions of the archos firmware without excessive fiddling?
<Zagor>	just copy the old file to the root dir
<dwihno>	ah
<dwihno>	I thought the newer versions would prevent this
<Zagor>	no
<dwihno>	Is the USB-PC communication code in the firmware?
<Bagder>	no
<Bagder>	it is beyond the firmware's control
<dwihno>	ah, okay...
<dwihno>	Might as well be :)
*	dwihno drools, today I'm gonna order myself the almighty archos :Õ~~~~~~~~~
<Linus>	dwihno: So we managed to convince you?
<Zagor>	the rockbox sales force :)
<Linus>	We want commission from Archos
<dwihno>	Linus: Yeah, you did...
<dwihno>	I just hope I won't get disappointed when my unit arrives.
<dwihno>	I have extreme high hopes about this product
<Zagor>	well don't expect a miracle product. it does have flaws.
<Zagor>	it's just better than all the rest :)
<dwihno>	:)
<dwihno>	Do you think I will get satisified?
<Linus>	The swedish magazine M3 recently had a review of a lame flash-based player with recording capapilities
<dwihno>	And can I trust the storage? I mean, I don't want the hardware to go bongo when I move all my music to it :)
<Linus>	and they were ASTOUNDED that it actually cound record sound from the Line-In
<Linus>	Bua! They are so lame!
<dwihno>	hm
<dwihno>	Journalists != techies
<Linus>	I would rather say that Archos marketing has failed in Sweden
<Linus>	and M3 are totally blindfolded
<dwihno>	-( )-( )- <-- blindness goggles
<Zagor>	don't trust the storage
<Linus>	I always keep a mirror on my PC
<Zagor>	it doesn't fail easily, but never depend on something you keep in your pocket
<dwihno>	True. True.
<dwihno>	How many times has it failed you?
<Zagor>	never
<Linus>	never
<dwihno>	okay
<dwihno>	Zagor: you had it for a year or so?
<dwihno>	Or is it just me being new in the scene? :)
<Zagor>	dwihno: about 18 months
<dwihno>	oh
<dwihno>	really strange I've never heard about the archos earlier.
<dwihno>	marketing failure, I presume
<Zagor>	exactly
<Zagor>	it's a small company, and Creative's weekly marketing budget dwarfs their yearly..
<dwihno>	well, I do see the positive side - It's a non-hong kong product
<dwihno>	Never trust fishy hardware from hong kong
<Zagor>	well don't hope too much from archos. they're not "the good guys".
<dwihno>	You mean, the serial RIAA thingy?
<wavey>	the build quality of the archos units are pretty poor
<wavey>	but worth it in the long run
<Zagor>	no i just mean they are not a better company than anyone else
<dwihno>	wavey: in what way? does it feel way plastic or such?
<Linus>	they are actually manufactured in China
<dwihno>	h
<dwihno>	hm
<dwihno>	Do they feel like they're gonna break apart any second?
<Bagder>	no
<Zagor>	no
<Linus>	haha no!
---	Linus is now known as Linus|lunch
---	Zagor is now known as Zagor|lunch
<wavey>	dw: my unit keeps resetting because of bad contacts
<wavey>	needs resoldering
<wavey>	happened after a couple of months
<dwihno>	geez :/
<wavey>	there's webpages showing where to resolder, because it's not uncommon
<wavey>	this is on a recorder bought in january
<dwihno>	okay
<dwihno>	I just hope I will get a flawless unit
<wavey>	i love the device, but i wish it was built by sony
<dwihno>	Heh
<dwihno>	+$200 on the price tag :)
<wavey>	alas yes ;)
<Linus|lunch>	Soun would never build a harddrive-based player
<Linus|lunch>	Sony
<Linus|lunch>	They love their silly memory sticks too much
---	Linus|lunch is now known as Linus
---	Zagor|lunch is now known as Zagor
<dwihno>	Memory-dick
<dwihno>	Yeah
<dwihno>	Expensive shit, just look at the price tags!
<dwihno>	It's probably in the same range as the recorder-20
<PsycoXul>	ok
<PsycoXul>	in main.c i commented out everything after init(); in main() and put app_main(); there
<Zagor>	PsycoXul: when did you try the app? this weekend, or yesterday evening?
<PsycoXul>	and when i run that i get "Rockbox!" displayed on the screen
<PsycoXul>	and then when i press a button it goes away and the LED turns red
<Zagor>	ah
<Zagor>	nothing more?
<PsycoXul>	and the LCD still never clears properly on the player, i'm always left with the 03 on the 2nd line after the rom version 5.03 splashscreen
<dwihno>	Press the button and the LED turns reeed! :D (alternative infinite mass lyrics)
<PsycoXul>	"ROCKbox!" is all it says
<PsycoXul>	and then any button gets rid of that, red LED comes on, and thats it [and the 03's still there :p]
<Zagor>	if you keep the old browse_root() call, nothing comes up?
<Zagor>	I want to change the UI: the browser should be the first thing that comes up, not a "where do you want to go today" menu
<Zagor>	when you press MENU, *then* the menu comes up
<Zagor>	anyone against that?
<Bagder>	nope
<dwihno>	Sounds like a good idea
<PsycoXul>	ok i put a little sleep in
<dwihno>	Try to keep the button pressing to a minimum
<PsycoXul>	i also changed the DEBUGF's in the init() in main.c to lcd_prints's so i can see them, and just put a little sleep in after the init and saw it's 
<PsycoXul>	    if (disk_init()) {
<PsycoXul>	its failing there
<Zagor>	interesting
<Zagor>	those should be panic() calls
<Zagor>	the only thing that can fail in disk_init() is if you don't have a boot sector on your disk
<PsycoXul>	heh
<Zagor>	can you do a: dd if=/dev/sda of=disk.img bs=512 count=1
<Zagor>	and send me the disk.img file
<PsycoXul>	heh
<PsycoXul>	ok
<PsycoXul>	and where's this panic()?
<Zagor>	firmware/panic.c
<PsycoXul>	panicf()?
<Zagor>	ah, yes
<Zagor>	your boot sector looks fine. sda was your archos, right?
<PsycoXul>	yes
<Zagor>	hmm
<PsycoXul>	ok i changed them to panicf()'s we'll see what i get
<PsycoXul>	ok its actualy a problem before that
<PsycoXul>	    if(ata_init()) {
<PsycoXul>	its that
<Zagor>	ok
<Linus>	Is is that stupid check_registers() thing?
<Zagor>	no, that's gone
<Linus>	sorry, I meant check_hd()
<Linus>	check_registers() is still there
<Zagor>	sorry, check_regs() is there, check_hd() is removed
<PsycoXul>	heh
<Zagor>	PsycoXul: make the panicf() call print the return code
<Linus>	actually, ata_hard_reset() is probably a stupid thing, BTW
<PsycoXul>	Zagor: of ata_init?
<Zagor>	yes
<Linus>	I can't see how PA2 is connected to the ATA interface at all
<Linus>	But I might be wrong
<Linus>	My guess is that it does nothing with the harddrive
<Linus>	Sorry, it's PA1
<Linus>	Still, PA1 is the RAS signal
<Linus>	So setting PA1=0 will do nothing whatsoever with the HD
<Zagor>	odd
<Linus>	yup
<PsycoXul>	er why's %d for int, man.. i just booted it up to see it print 'i' :p
<Zagor>	%d is ancient. dunno why it came to be.
<Bagder>	probably for decimal
<Zagor>	decimal, probably. as opposed to %x hex
<PsycoXul>	yeah
<PsycoXul>	heh
<PsycoXul>	ata_init()'s returning -1
<Zagor>	we could add a case 'i' in sprintf.c to avoid that mistake
<Zagor>	assuming %d and %i is the same
<PsycoXul>	heh
<dwihno>	Who did the ATA code?
<dwihno>	Zagor?
<Zagor>	i did
<Zagor>	based on alan's code
<dwihno>	ah, okay
<Zagor>	can the simulators do threading now?
<Bagder>	no
<Bagder>	do we need that at this point?
<Zagor>	that should be a priority, we'll need at least queues for keypresses soon
<Bagder>	why?
<Zagor>	this poll();sleep(1) isn't very good
<Bagder>	ah
<Bagder>	we'll just move that to the simulated keyget code
<Zagor>	it works on simulator, but gives one hell of a key repeat on target
<Bagder>	we can do that without threads
<Zagor>	right
<Bagder>	I just prefer to avoid threads in the simulator as far as possible
<Zagor>	ok. yes we can probably do without them for now
<PsycoXul>	so as far as i can tell wait_for_bsy() is timing out?
<Linus>	OK. So the ATA code fails at ata_hard_reset()?
<PsycoXul>	apparently
<Zagor>	no, there's not wait_for_bsy() in ata_hard_reset()
<Linus>	OK. wait_for_rdy() then
<Linus>	big deal it times out
<Zagor>	*what* times out, is the question
<Linus>	wait_for_rdy()
<Zagor>	he said wait_for_bsy()
<PsycoXul>	yeah but wait_for_rdy() calls wait_for_bsy
<Zagor>	doh. i'm a moron
<Linus>	is ata_hard_reset() fails, it can only be wait_for_rdy()
<PsycoXul>	right
<PsycoXul>	which can only fail if wait_for_bsy times out
<Zagor>	try commenting it out
<PsycoXul>	which?
<Zagor>	the call to ata_hard_reset()
<PsycoXul>	ok
<Zagor>	in ata_init()
<Linus>	then the next wait_for_bsy() call will fail...
<Zagor>	right
*	Zagor is a cotton head
<Linus>	We should debugf() the contents of the ATA status register
<Zagor>	coffee time'
<PsycoXul>	yeah so then it just returns -4 heh
<Zagor>	add this line to ata_init():
<Zagor>	panicf("stat: %02x", ATA_STATUS);
<PsycoXul>	where in there?
<Zagor>	just before ata_hard_reset()
<PsycoXul>	hmm
<PsycoXul>	says
<PsycoXul>	stat: 00
<Zagor>	ok
<Zagor>	you have a "new" player, right?
<PsycoXul>	yeah
<Zagor>	hmm
<Zagor>	how big disk do you have?
<PsycoXul>	20G
<Zagor>	ok
<Zagor>	is it a 6000 or a Studio?
<PsycoXul>	studio
*	Zagor hmms some more
<PsycoXul>	math 15360*1024
<PsycoXul>	er
<PsycoXul>	heh
<Zagor>	hang on, testing on my unit
<Zagor>	stat: 50
<Zagor>	hmm, hmm and hmm again
<PsycoXul>	maybe the rom firmware's doing something different?
<Zagor>	yes. or the hardware is different
<PsycoXul>	heh
<Zagor>	did any of alan's disk test code ever run on your archos?
<PsycoXul>	never tried it 
<Zagor>	ok
<Zagor>	but you run the same archos.mod firmware updates as any 6000 user, right?
<PsycoXul>	yep
<PsycoXul>	5.07a
<Linus>	Damn. We need a serial-modded new player
<Linus>	I wish the donated player had a working serial port...
<Linus>	Silly me. It has.
<PsycoXul>	heh
<Linus>	It's just that the charging unit was broken, so we decided to use Björns old display board
<Linus>	If we fix the broken board, we have a "new" player to debug
<Linus>	we==me, unfortunately... :-)
<PsycoXul>	heh
<Zagor>	I think it's time to do that. this "franchos" of ours isn't working too well
<PsycoXul>	anything else you want me to test?
<Zagor>	not right now
<PsycoXul>	ok
<Zagor>	menu.c is much too recorder specific
<Linus>	not very surprising
<Linus>	I have made a logic analyzer trace of the Old (tm) Player LCD init sequence
<Zagor>	ah!
<Linus>	It doesn't seem to be the Solomon LCD that we thought it was
<Zagor>	uhhh, do I want to hear this? ;)
<Linus>	Zagor: we should publish it and let people try to figure out what it is
<Zagor>	sure
<dwihno>	Damn
<dwihno>	You are evil hardware guru jultomtar dudes!
<Linus>	Our LCD shifting code doesn't talk to the LCD in the same way that the original firmware does
<Zagor>	dwihno: is that good or bad? ;)
<dwihno>	Zagor: *jultomte* = excellent! :D
<Linus>	It only sets the command/data bit in the last bit
<dwihno>	"1 bit should be enough for everyone"
<Linus>	We do it for every bit
<Linus>	I'm not sure that it matters at all, though
<Linus>	the Solomon data sheet says that it is only sampled every 8th bit
<Zagor>	Linus: that's intentional
<Linus>	and I assume that our LCD isn't that much different in that aspect
<Zagor>	we do it once, and then loop through all 8 bits
<Zagor>	it's less complex than stopping and handling one bit specially
<Zagor>	I assumed it would work the same
<Linus>	I know, Zagor. Just pointng out a difference
<Zagor>	ok
<Linus>	So now I need a similar trace of the New(tm) Player
<Linus>	Zagor: If you don't mind running on batteries, you can just switch LCD board right away
<Zagor>	sure
<Linus>	And we can trace your LCD while we're at it
<Bagder>	go go go
<dwihno>	1x2
<Zagor>	hmm, tree.c and menu.c have much in common. we should merge them
<dwihno>	There. My order has been placed.
<Linus>	I just analyzed Björns New(tm) Player. The init sequence for new and old LCD are identical
<Bagder>	that's good at least
<dwihno>	really strange
<Linus>	Well, almost identical. A single command differs
<Linus>	But that might just be that the firmwares are of different revisions
<Linus>	I gitta fly now.
<Linus>	gotta
<--	Linus (~linus@labb.contactor.se) has left #rockbox
<Bagder>	maybe the 
<Bagder>	desc part of the credits isn't necessary in the software
<Zagor>	i know. i just made a quick port
<dwihno>	Bagder: I've ordered my archos now!
<dwihno>	:D
<Bagder>	when will you get it?
<dwihno>	hm
<dwihno>	dunno
<dwihno>	a couple of days, I presume
<dwihno>	Hm... 20 gigs over USB1 will take several hours
<Bagder>	yes
<Bagder>	get a usb2 card ;-)
<Zagor>	Bagder: the simulator has no tick, right?
<Bagder>	Zagor: tick?
<Zagor>	timer tick, for splash timeout for instance
<Bagder>	no, but sleep() should work
<Zagor>	ah. yes
<dwihno>	Bagder: Nah, I don't need it :) For initial sync it would be nice, but it will be nothing but overkill later on
<Bagder>	overkill speedwise is nice ;-)
<dwihno>	heh
<dwihno>	nah :)
<Bagder>	time to go home, see ya
<--	Bagder (~daniel@as3-3-2.ras.s.bonet.se) has left #rockbox
<Zagor>	i'm off too. see you guys
<--	Zagor (~bjst@labb.contactor.se) has left #rockbox
---	dwihno is now known as dw|gone
<--	wavey has quit (Read error: 110 (Connection timed out))
-->	wavey (~wavey@host-54.valtech.co.uk) has joined #rockbox
<adi|work>	can i assume there is an off button on the player?
-->	Zagor (~bjst@as9-5-6.k.s.bonet.se) has joined #rockbox
<Zagor>	adi|home: you here?
<Tumm>	tänk på att
<Tumm>	om man slår yxan i båten, får man ro som fan
<Zagor>	:)
*	Tumm har tråkigt... väldigt tråkigt
<Zagor>	han pratar! :)
<Tumm>	;)
<Tumm>	följer utvecklingen via mailinglistorna...
<Zagor>	ok
<Tumm>	tar studenten om 2 veckor, så jag har tyvvär inte hunnit skaffa mig så mycket kunskaper om inbyggda system...
<Tumm>	sitter mes och försöker knåpa ihop demos :)
<Tumm>	eller...
<Zagor>	vilken plattform?
<Tumm>	win32 för tillfället
<--	wavey has quit (Read error: 110 (Connection timed out))
<adi|work>	yeah Zagor whats up?
<Zagor>	the off key has to be #ifdef SIMULATOR
<adi|work>	nods
<Zagor>	the firmware must never exit
<adi|work>	ahhh, okay :)
<Zagor>	i'm fixing it now, so don't worry :)
<adi|work>	ah.. was about to commit :)
<adi|work>	then nm
<Zagor>	too late :)
<adi|work>	i was giving some thought to the whole 'not read a valid file' thing
<adi|work>	one concern was excessive spin up and down of the drive...
<adi|work>	but if you are planning to 'play' the file, then its not a concern is it?
<Zagor>	it might still be, if you take some time to select the next it will spin down and up agin
<Zagor>	we should filter out non-mp3 files
<adi|work>	you just read your first buffer in, then check and confirm that it is one of the format we want..
<adi|work>	i dont evn think that...
<adi|work>	no reason you shouldn't be able to 'read' a text file
<Zagor>	right, but perhaps not in the mp3 player mode? i haven't thought about it...
<adi|work>	hmmm i don't think there should be a 'mp3' mode and a 'not mp3 mode'
<Zagor>	maybe not
*	adi|work shrugs
<adi|work>	ill be around later tonight.. we can try and think it through then...
<Zagor>	yup
<adi|work>	btw.. what time is it by you?
<Zagor>	22:32
<adi|work>	should be like midnight no?
<adi|work>	nods
<adi|work>	so ill see you in your morning ;)
<Zagor>	heh, ok
<--	Zagor has quit ("bye")
<PsycoXul>	well the archos firmware does handle being turned off somehow, because custom firmware won't turn off with the power plugged in but archos firmware will
---	Disconnected (Connection timed out).
**** ENDING LOGGING AT Tue May 21 20:07:37 2002

